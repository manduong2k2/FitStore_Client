<%if(data.length == 0){%>
<div class="container text-center text-black">
  <div class="row">
    <div class="col-md-6 offset-md-3">
      <h3 class="mt-5">Your cart is empty</h3>
      <p class="lead" style="margin: 30px auto">
        Please add some product to your cart
      </p>
      <a class="btn btn-primary" style="margin: 10px auto" href="/"
        >Go to list home</a
      >
    </div>
  </div>
</div>
<% } else { %>
<div class="container form-container">
  <h1>Giỏ hàng</h1>
  <table class="table">
    <thead>
      <tr>
        <th>Tên sản phẩm</th>
        <th>Hình</th>
        <th>Số lượng</th>
        <th>Giá</th>
        <th>Tổng</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% let toTal = 0; %>
      <% data.forEach(item => { toTal+=item.quantity * item.product.price %>
      <tr id="product<%=item.product.id%>item" class="productItem">
        <td><%=item.product.name%></td>
        <td>
          <img
            src="<%=item.product.image%>"
            alt="Hình ảnh"
            style="height: 100px"
          />
        </td>
        <td>
          <div style="display: inline-flex;">
            <button id="product<%=item.product.id%>button" onclick="DecreaseByOne('<%=item.product.id%>','<%=item.product.price%>')" class="btn btn-danger <%= item.quantity === 1 ? 'disable-btn' : '' %>">-</button>
            <input id="product<%=item.product.id%>number" style="width: 80px;"
              type="number"
              min="1"
              value="<%=item.quantity%>"
              attr="data-id= <%=item.product_id%>"
              class="form-control quantity"
            />
            <button onclick="IncreaseByOne('<%=item.product.id%>','<%=item.product.price%>')" class="btn btn-success">+</button>
          </div>
        </td>
        <td>
          <label>
            <span readonly><%=(item.product.price).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")%></span>
            <span>₫</span>
          </label>
        </td>
        <td>
          <label>
            <span id="product<%=item.product.id%>total" class="itemTotal" ><%=(item.quantity*item.product.price).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".")%></span>
            <span>₫</span>
          </label>
        </td>
        <td>
          <a
            class="btn btn-danger"
            onclick="RemoveItem('<%=item.product.id%>','<%=item.product.price%>')"
          >
            Remove
          </a>
        </td>
      </tr>
      <% }); %>
    </tbody>
  </table>
  <div class="row">
    <div class="col-md-12">
      <h3>
        Tổng hoá đơn:
        <input id="hiddenBillTotal" type="number" style="display: none;" value="<%=toTal%>">
        <span id="billTotal">
          <%=toTal.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".") %>
        </span>
        <span>₫</span>
      </h3>
    </div>
    <div class="col-md-12 text-center" style="margin: 10px 0">
      <a class="btn btn-success" style="margin: 0px 15px">Checkout</a>
      <a onclick="RemoveAllItem()" class="btn btn-danger">Clear Cart</a>
    </div>
  </div>
</div>
<% } %>
<script>
  console.log(data);
</script>
